<%- include("../_partials/head") %>
<div class="container">
	<div class="row justify-content-between">
		<div class="col-4">
			<h1>List of lost items</h1>
		</div>
		<div class="col-4 mt-3">
			<button class="btn btn-primary logout">Logout</button>
		</div>
	</div>

	<a href="/object/new" class="btn btn-primary">Add item</a>
	<div class="list_item">
		<% if(typeof objects == 'object' && objects.length > 0){ %>
			<table class="table table-striped">
				<thead>
					<tr>
						<th scope="col">Name</th>
						<th scope="col">Place</th>
						<th scope="col">Date</th>
						<th scope="col">Author</th>
						<th scope="col">Description</th>
					</tr>
				</thead>
				<tbody>
					<% objects.forEach((object) => { %>
						<tr>
							<th><%= object.name %></th>
							<td><%= object.place %></td>
							<td><%= moment(object.date).format('L') %></td>
							<td class="description"><%= object.user.username %></td>
							<td class="description"><%= object.description %></td>
						</tr>
					<% }) %>
				</tbody>
			</table>
		<% } else { %>
			<p class="text-center">there is no object yet</p>
		<% } %>
	</div>
</div>

<script>
	const logout = document.querySelector(".logout");
	logout.addEventListener('click', function () {
		sessionStorage.removeItem("username");
		sessionStorage.removeItem("token");
		localStorage.removeItem("username");
		localStorage.removeItem("token");
		location = "/";
	})
</script>
<%- include("../_partials/footer") %>
